<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Speak Easy</title>
  <link rel="icon" href="images/logo.png" type="image/x-icon">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #f2f2f2 0%, #eee 74%);
      overflow-y: auto; /* Add scrollbar */
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #151414; /* Change title bar color to white */
      color: #eeebeb; /* Change title color to black */
      padding: 20px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
    }

    .logo img {
      max-height: 50px;
      width: auto;
      margin-right: 10px;
      left: 10px;
      top: -10px;
    }

    .menu-icon {
      cursor: pointer;
      z-index: 1;
      position: fixed;
      top: 40px;
      left: 20px;
      width: 30px;
      height: 10px;
      background-color: transparent;
      border: none;
      padding: 0;
      transition: transform 0.3s ease-in-out;
    }

    .menu-icon span {
      display: block;
      width: 100%;
      height: 4px;
      background-color: #f5efef;
      margin-bottom: 5px;
    }

    .menu-icon.cross span:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .menu-icon.cross span:nth-child(2) {
      transform: rotate(-45deg) translate(6px, -5px);
    }

    .sidebar {
      width: 250px;
      height: 100%;
      background-color: #18f504;
      position: fixed;
      top: 100px;
      left: -250px;
      transition: left 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      padding-top: 20px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      z-index: 999;
    }

    .sidebar.active {
      left: 0;
    }

    .menu-item {
      cursor: pointer;
      font-size: 16px;
      padding: 10px 20px;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: background-color 0.3s ease;
    }

    .menu-item:hover {
      background-color: #333;
    }

    .sub-menu {
      width: 150px;
      background-color: #140000f0;
      position: absolute;
      top: 60;
      left: 100%;
      display: none;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .sub-menu.active {
      display: block;
    }

    .sub-menu-item {
      padding: 10px;
      color: #0f0;
    }

    .arrow-button {
      width: 20px;
      height: 20px;
      fill: #fff;
      transition: transform 0.3s ease;
    }

    .menu-item:hover .arrow-button {
      transform: rotate(90deg);
    }

    .content-container {
      margin-top: 60px;
      padding: 40px;
      height: calc(100vh - 60px);
      overflow-y: auto;
      background-image: url('images/background.jpeg');
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center;
      transition: filter 0.3s ease; /* Add transition effect */
    }

    .content-container.blurred {
      filter: blur(5px); /* Apply blur effect */
    }

    .function-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      margin-top: 70px;
      transition: background-color 0.3s ease;
    }

    .function-icon {
      width: 220px;
      height: 220px;
      margin-bottom: 10px;
      cursor: pointer;
    }
    h1 {
      color: #e7e0e0;
    }

    h2{
        position:relative ;
        left: 80px;
    }

    select, button {
      margin-top: 10px;
      padding: 8px 16px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      background-color: #007bff;
      color: #fff;
      transition: background-color 0.3s ease;
    }

    select {
      width: 100%;
    }

    img {
      margin-top: 20px;
      max-width: 200px;
      position: relative;
      left: 150px;
    }

    #book-content {
      margin-top: 20px;
      text-align: left;
      padding: 10px;
      background-color: #fff;
      border-radius: 4px;
    }

    .button:hover {
      background-color: #0056b3;
    }

    .function-text {
      font-size: 26px;
      color: rgb(12, 12, 12);
      font-weight: bold;
    }
  </style>
</head>
<body>
  <!-- Header with logo and title -->
  <header class="header">
    <!-- Logo -->
    <div class="logo">
        <a href="index.html" class="logo"></a>
      <img src="images/logo.png" alt="Logo">
    </div>
    <!-- Title -->
    <h1 class="title"><a href="index.html" style="text-decoration: none; color: inherit;">Speak Easy</a></h1>
    <!-- Menu Icon -->
    <button class="menu-icon">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </header>

  <!-- Sidebar Menu -->
  <div class="sidebar">
    <!-- Menu items and sub-menu -->
    <div class="menu-item">Learning Resources (Sample!)<svg class="arrow-button" viewBox="0 0 24 24"><path d="M5.293 7.293a1 1 0 011.414 0L12 12.586l5.293-5.293a1 1 0 111.414 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414z"></path></svg>
      <div class="sub-menu">
        <div class="sub-menu-item">English Books</div>
        <div class="sub-menu-item">Amazon E-Library</div>
      </div>
    </div>
    <div class="menu-item">Interactive Activities (Sample!)<svg class="arrow-button" viewBox="0 0 24 24"><path d="M5.293 7.293a1 1 0 011.414 0L12 12.586l5.293-5.293a1 1 0 111.414 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414z"></path></svg>
      <div class="sub-menu">
        <div class="sub-menu-item">
          <a href="translator1.html">Translator</a>
        </div>
        <div class="sub-menu-item">
          <a href="reading.html">Reading</a>
        </div>
        <div class="sub-menu-item">
          <a href="roleplay.html">Roleplay</a>
        </div>
      </div>
    </div> 
    <div class="menu-item">Community Forums</div>
    <div class="menu-item">Progress Tracker</div>
  </div>

  <!-- Main Content -->
  <div class="content-container">
    <div id="container">
      <h2>Interactive Reading Book</h2>
      <label for="voices">Select a voice:</label>
      <select id="voices" onchange="changeVoice()">
        <option value="0">Default</option>
        <option value="1">Male Voice</option>
        <option value="2">Female Voice</option>
      </select>
      <br><br>

      <img src="images/reading-fotor-bg-remover-20240513225553.png" alt="Cartoon Book" width="150">
      <br><br>

      <label for="books">Select a book:</label>
      <select id="books" onchange="loadBook()">
        <option value="">Select a book</option>
        <option value="hungry_caterpillar">The Very Hungry Caterpillar</option>
        <option value="wild_things">Where the Wild Things Are</option>
      </select>
      <br><br>

      <div id="book-content"></div>
      <br><br>

      <button class="button" onclick="toggleReading()">Toggle Reading</button>
      <button class="button" onclick="pauseReading()">Pause Reading</button>
      <button class="button" onclick="resumeReading()">Resume Reading</button>
      <button class="button" onclick="repeatBook()">üîÅ Repeat Book</button>
    </div>
  </div>

  <script>
    // JavaScript to toggle sidebar and menu icon
    const menuIcon = document.querySelector('.menu-icon');
    const sidebar = document.querySelector('.sidebar');
    const content = document.querySelector('.content-container');

    menuIcon.addEventListener('click', () => {
      sidebar.classList.toggle('active');
      menuIcon.classList.toggle('cross');
      content.classList.toggle('blurred'); // Toggle blur effect on content
    });

    // Add event listener to show sub-menu and close others when hovering on menu item
    const menuItems = document.querySelectorAll('.menu-item');
    menuItems.forEach((menuItem) => {
      menuItem.addEventListener('mouseenter', () => {
        const subMenu = menuItem.querySelector('.sub-menu');
        const allSubMenus = document.querySelectorAll('.sub-menu');
        allSubMenus.forEach((menu) => {
          if (menu !== subMenu) {
            menu.classList.remove('active');
          }
        });
        if (subMenu) {
          subMenu.classList.add('active');
        }
      });
    });

    // Add event listener to close sub-menu when cursor leaves menu item
    menuItems.forEach((menuItem) => {
      menuItem.addEventListener('mouseleave', () => {
        const subMenu = menuItem.querySelector('.sub-menu');
        if (subMenu) {
          subMenu.classList.remove('active');
        }
      });
    });

    // Add event listener to close sidebar and remove blur effect when clicking outside
    document.addEventListener('click', (event) => {
      const sidebar = document.querySelector('.sidebar');
      const menuIcon = document.querySelector('.menu-icon');

      if (!sidebar.contains(event.target) && !menuIcon.contains(event.target)) {
        sidebar.classList.remove('active');
        menuIcon.classList.remove('cross');
        content.classList.remove('blurred'); // Remove blur effect from content
      }
    });

    // Add event listener to close sub-menu when clicking outside
    document.addEventListener('click', (event) => {
      const subMenus = document.querySelectorAll('.sub-menu');
      subMenus.forEach((subMenu) => {
        const menuItem = subMenu.parentElement;
        if (!menuItem.contains(event.target) && !subMenu.contains(event.target)) {
          subMenu.classList.remove('active');
        }
      });
    });

    let readingInterval;
    let currentVoice = 0;
    let speed = 1; // Default speed
    let currentIndex = 0;

    // Ensure speech synthesis is initialized
    window.speechSynthesis.onvoiceschanged = function() {
      // Load book once voices are loaded
      loadBook();
    };

    function loadBook() {
      const selectedBook = document.getElementById('books').value;
      let text;
      if (selectedBook === 'hungry_caterpillar') {
        text = `This classic children's book follows the journey of a tiny, voracious caterpillar as it eats its way through a variety of foods before transforming into a beautiful butterfly. Each day, the caterpillar eats increasingly larger quantities of different foods, from apples and pears to cakes and ice cream. After a period of overeating, the caterpillar forms a cocoon and emerges as a splendid butterfly, teaching children about the life cycle of a butterfly and the importance of patience and transformation.`;
      } else if (selectedBook === 'wild_things') {
        text = `In this imaginative tale, a young boy named Max is sent to bed without supper for misbehaving. In his room, he creates a fantastical world filled with mysterious creatures called 'wild things.' Max sails to the land of the wild things, where he becomes their king and leads them in wild adventures. However, he eventually grows homesick and returns to his own room, where he finds his supper waiting for him. This story encourages children to embrace their imagination and creativity while also acknowledging the importance of home and family.`;
      } else {
        text = "";
      }
      document.getElementById('book-content').innerText = text;
    }

    function toggleReading() {
      if (readingInterval) {
        clearInterval(readingInterval);
        readingInterval = null;
      } else {
        readText();
      }
    }

    function pauseReading() {
      clearInterval(readingInterval);
      readingInterval = null;
    }

    function resumeReading() {
      if (!readingInterval) {
        readText(currentIndex);
      }
    }

    function readText(startIndex = 0) {
      const text = document.getElementById('book-content').innerText;
      const words = text.split(/\s+/);

      currentIndex = startIndex; // Update current index

      readingInterval = setInterval(() => {
        if (currentIndex >= words.length) {
          clearInterval(readingInterval);
          readingInterval = null;
          return;
        }

        const word = words[currentIndex];
        speak(word);

        currentIndex++; // Move to the next word
      }, 1000); // Read one word per second
    }

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      if (currentVoice === 1) {
        utterance.voice = window.speechSynthesis.getVoices().find(voice => voice.name === 'Google UK English Male');
      } else if (currentVoice === 2) {
        utterance.voice = window.speechSynthesis.getVoices().find(voice => voice.name === 'Google UK English Female');
      }
      utterance.rate = speed; // Adjust the speech rate based on the selected speed
      window.speechSynthesis.speak(utterance);
    }

    function changeVoice() {
      currentVoice = parseInt(document.getElementById('voices').value);
      if (readingInterval) {
        clearInterval(readingInterval);
        readingInterval = null;
        readText(currentIndex);
      }
    }

    function repeatBook() {
      currentIndex = 0;
      readText();
    }
  </script>
</body>
</html>
